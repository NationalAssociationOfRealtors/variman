<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>&#31532;&nbsp;6&nbsp;&#31456;&nbsp;&#38598;&#21512;&#31867;(Collections)&#26144;&#23556;</title><link rel="stylesheet" href="../shared/css/html.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.65.1"><link rel="home" href="index.html" title="HIBERNATE - &#31526;&#21512;Java&#20064;&#24815;&#30340;&#20851;&#31995;&#25968;&#25454;&#24211;&#25345;&#20037;&#21270;"><link rel="up" href="index.html" title="HIBERNATE - &#31526;&#21512;Java&#20064;&#24815;&#30340;&#20851;&#31995;&#25968;&#25454;&#24211;&#25345;&#20037;&#21270;"><link rel="previous" href="mapping.html" title="&#31532;&nbsp;5&nbsp;&#31456;&nbsp;O/R Mapping&#22522;&#30784;"><link rel="next" href="components.html" title="&#31532;&nbsp;7&nbsp;&#31456;&nbsp;&#32452;&#20214;&#65288;Component&#65289;&#26144;&#23556;"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">&#31532;&nbsp;6&nbsp;&#31456;&nbsp;&#38598;&#21512;&#31867;(Collections)&#26144;&#23556;</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="mapping.html">&#19978;&#19968;&#39029;</a>&nbsp;</td><th width="60%" align="center">&nbsp;</th><td width="20%" align="right">&nbsp;<a accesskey="n" href="components.html">&#19979;&#19968;&#39029;</a></td></tr></table><hr></div><div class="chapter" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title"><a name="collections"></a>&#31532;&nbsp;6&nbsp;&#31456;&nbsp;&#38598;&#21512;&#31867;(Collections)&#26144;&#23556;</h2></div></div><div></div></div><div class="sect1" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="collections-persistent"></a>6.1.&nbsp;&#25345;&#20037;&#21270;&#38598;&#21512;&#31867;(Persistent Collections)</h2></div></div><div></div></div><p><a name="collections-persistent-translate-comment"></a>
            (&#35793;&#32773;&#27880;&#65306;&#22312;&#38405;&#35835;&#26412;&#31456;&#30340;&#26102;&#20505;&#65292;&#20197;&#21518;&#25972;&#20010;&#25163;&#20876;&#30340;&#38405;&#35835;&#36807;&#31243;&#20013;&#65292;&#25105;&#20204;&#37117;&#20250;&#38754;&#20020;&#19968;&#20010;&#21517;&#35789;&#26041;&#38754;&#30340;&#38382;&#39064;&#65292;&#37027;&#23601;&#26159;&#8220;&#38598;&#21512;&#8221;&#12290;"Collections"&#21644;"Set"&#22312;&#20013;&#25991;&#37324;&#23545;&#24212;&#37117;&#34987;&#32763;&#35793;&#20026;&#8220;&#38598;&#21512;&#8221;&#65292;&#20294;&#26159;&#20182;&#20204;&#30340;&#21547;&#20041;&#24456;&#19981;&#19968;&#26679;&#12290;Collections&#26159;&#19968;&#20010;&#36229;&#38598;&#65292;Set&#26159;&#20854;&#20013;&#30340;&#19968;&#31181;&#12290;&#22823;&#37096;&#20998;&#24773;&#20917;&#19979;&#65292;&#26412;&#35793;&#31295;&#20013;&#27867;&#25351;&#30340;&#26410;&#21152;&#33521;&#25991;&#27880;&#26126;&#30340;&#8220;&#38598;&#21512;&#8221;&#65292;&#37117;&#24212;&#24403;&#29702;&#35299;&#20026;&#8220;Collections&#8221;&#12290;&#22312;&#26377;&#20123;&#20108;&#32773;&#21516;&#26102;&#20986;&#29616;&#65292;&#21487;&#33021;&#36896;&#25104;&#28151;&#28102;&#30340;&#22320;&#26041;&#65292;&#25105;&#20204;&#29992;&#8220;&#38598;&#21512;&#31867;&#8221;&#26469;&#29305;&#25351;&#8220;Collecions&#8221;,&#8220;&#38598;&#21512;(Set)&#8221;&#26469;&#25351;"Set"&#65292;&#19968;&#33324;&#37117;&#20250;&#22312;&#21518;&#38754;&#30340;&#25324;&#21495;&#20013;&#32473;&#20986;&#33521;&#25991;&#12290;&#24076;&#26395;&#22823;&#23478;&#22312;&#38405;&#35835;&#26102;&#32852;&#31995;&#19978;&#19979;&#25991;&#29702;&#35299;&#65292;&#19981;&#35201;&#36896;&#25104;&#35823;&#35299;&#12290;
            &#19982;&#27492;&#21516;&#26102;&#65292;&#8220;&#20803;&#32032;&#8221;&#19968;&#35789;&#23545;&#24212;&#30340;&#33521;&#25991;&#8220;element&#8221;&#65292;&#20063;&#26377;&#20004;&#20010;&#19981;&#21516;&#30340;&#21547;&#20041;&#12290;&#20854;&#19968;&#20026;&#38598;&#21512;&#30340;&#20803;&#32032;&#65292;&#26159;&#20869;&#23384;&#20013;&#30340;&#19968;&#20010;&#21464;&#37327;&#65307;&#21478;&#19968;&#21547;&#20041;&#21017;&#26159;XML&#25991;&#26723;&#20013;&#30340;&#19968;&#20010;&#26631;&#31614;&#25152;&#20195;&#34920;&#30340;&#20803;&#32032;&#12290;&#20063;&#35831;&#27880;&#24847;&#21306;&#21035;&#12290;
            &#26412;&#31456;&#20013;,&#29305;&#21035;&#26159;&#21518;&#21322;&#37096;&#20998;&#26159;&#38656;&#35201;&#21453;&#22797;&#38405;&#35835;&#25165;&#33021;&#29702;&#35299;&#28165;&#26970;&#30340;&#12290;&#22914;&#26524;&#36935;&#21040;&#20219;&#20309;&#30097;&#38382;,&#35831;&#35760;&#20303;,&#33521;&#25991;&#29256;&#26412;&#30340;reference&#26159;&#24799;&#19968;&#26631;&#20934;&#30340;&#21442;&#32771;&#36164;&#26009;&#12290;)
            </p><p>
                &#36825;&#37096;&#20998;&#19981;&#21253;&#21547;&#22823;&#37327;&#30340;Java&#20195;&#30721;&#20363;&#23376;&#12290;&#25105;&#20204;&#20551;&#23450;&#20320;&#24050;&#32463;&#20102;&#35299;&#22914;&#20309;&#20351;&#29992;Java&#33258;&#36523;&#30340;&#38598;&#21512;&#31867;&#26694;&#26550;(Java's collections framework)&#12290; &#20854;&#23454;&#22914;&#26524;&#26159;&#36825;&#26679;, &#36825;&#37324;&#23601;&#30495;&#30340;&#27809;&#26377;&#20160;&#20040;&#19996;&#35199;&#38656;&#35201;&#23398;&#20064;&#20102;...  &#29992;&#19968;&#21477;&#35805;&#26469;&#20570;&#20010;&#24635;&#32467;,&#20320;&#23601;&#29992;&#20320;&#24050;&#32463;&#25484;&#25569;&#30340;&#30693;&#35782;&#26469;&#20351;&#29992;&#23427;&#20204;&#21543;&#65292;&#19981;&#29992;&#20026;&#20102;&#36866;&#24212;Hibernate&#32780;&#20316;&#20986;&#25913;&#21464;.
            </p><p>
                Hibernate&#21487;&#20197;&#25345;&#20037;&#21270;&#20197;&#19979;java&#38598;&#21512;&#30340;&#23454;&#20363;, &#21253;&#25324;<tt class="literal">java.util.Map</tt>,
                <tt class="literal">java.util.Set</tt>,
                <tt class="literal">java.util.SortedMap</tt>,
                <tt class="literal">java.util.SortedSet</tt>,
                <tt class="literal">java.util.List</tt>, &#21644;&#20219;&#20309;&#25345;&#20037;&#23454;&#20307;&#25110;&#20540;&#30340;&#25968;&#32452;&#12290;&#31867;&#22411;&#20026;<tt class="literal">java.util.Collection</tt>&#25110;&#32773;<tt class="literal">java.util.List</tt>&#30340;&#23646;&#24615;&#36824;&#21487;&#20197;&#20351;&#29992;"bag"&#35821;&#20041;&#26469;&#25345;&#20037;&#12290;
            </p><p>
                &#35686;&#21578;&#65306;&#29992;&#20110;&#25345;&#20037;&#21270;&#30340;&#38598;&#21512;&#65292;&#38500;&#20102;&#38598;&#21512;&#25509;&#21475;&#22806;&#65292;&#19981;&#33021;&#20445;&#30041;&#20219;&#20309;&#23454;&#29616;&#36825;&#20123;&#25509;&#21475;&#30340;&#31867;&#25152;&#38468;&#21152;&#30340;&#35821;&#20041;(&#20363;&#22914;:<tt class="literal">LinkedHashSet</tt>&#24102;&#26469;&#30340;&#36845;&#20195;&#39034;&#24207;)&#12290;&#25152;&#26377;&#30340;&#25345;&#20037;&#21270;&#38598;&#21512;&#65292;&#23454;&#38469;&#19978;&#37117;&#21508;&#33258;&#25353;&#29031;
                <tt class="literal">HashMap</tt>,
                <tt class="literal">HashSet</tt>,
                <tt class="literal">TreeMap</tt>,
                <tt class="literal">TreeSet</tt> &#21644;
                <tt class="literal">ArrayList</tt> &#30340;&#35821;&#20041;&#30452;&#25509;&#24037;&#20316;&#12290;&#26356;&#28145;&#20837;&#22320;&#35828;&#65292;&#23545;&#20110;&#19968;&#20010;&#21253;&#21547;&#38598;&#21512;&#30340;&#23646;&#24615;&#26469;&#35828;&#65292;&#24517;&#39035;&#25226;Java&#31867;&#22411;&#23450;&#20041;&#20026;&#25509;&#21475;&#65288;&#20063;&#23601;&#26159;<tt class="literal">Map</tt>, <tt class="literal">Set</tt> &#25110;&#32773;<tt class="literal">List</tt>&#31561;&#65289;&#65292;&#32780;&#32477;&#19981;&#33021;&#26159;<tt class="literal">HashMap</tt>, <tt class="literal">TreeSet</tt> &#25110;&#32773; <tt class="literal">ArrayList</tt>&#12290;&#23384;&#22312;&#36825;&#20010;&#38480;&#21046;&#30340;&#21407;&#22240;&#26159;&#65292;&#22312;&#20320;&#19981;&#30693;&#36947;&#30340;&#26102;&#20505;&#65292;Hibernate&#26263;&#20013;&#25226;&#20320;&#30340;<tt class="literal">Map</tt>, <tt class="literal">Set</tt> &#21644; <tt class="literal">List</tt> &#30340;&#23454;&#20363;&#26367;&#25442;&#25104;&#20102;&#23427;&#33258;&#24049;&#30340;&#20851;&#20110;<tt class="literal">Map</tt>, <tt class="literal">Set</tt> &#25110;&#32773; <tt class="literal">List</tt> &#30340;&#23454;&#29616;&#12290;&#65288;&#25152;&#20197;&#22312;&#20320;&#30340;&#31243;&#24207;&#20013;,&#35880;&#24910;&#20351;&#29992;<tt class="literal">==</tt>&#25805;&#20316;&#31526;&#12290;&#65289;(&#35793;&#32773;&#35828;&#26126;: &#20026;&#20102;&#25552;&#39640;&#24615;&#33021;&#31561;&#26041;&#38754;&#30340;&#21407;&#22240;,&#22312;Hibernate&#20013;&#23454;&#29616;&#20102;&#20960;&#20046;&#25152;&#26377;&#30340;Java&#38598;&#21512;&#30340;&#25509;&#21475; &#12290;)
            </p><pre class="programlisting">Cat cat = new DomesticCat();
Cat kitten = new DomesticCat();
....
Set kittens = new HashSet();
kittens.add(kitten);
cat.setKittens(kittens);
session.save(cat);
kittens = cat.getKittens(); //Okay, kittens collection is a Set
(HashSet) cat.getKittens(); //Error!</pre><p>
               	&#38598;&#21512;&#36981;&#20174;&#23545;&#20540;&#31867;&#22411;&#30340;&#36890;&#24120;&#35268;&#21017;&#65306;&#19981;&#33021;&#20849;&#20139;&#24341;&#29992;, &#19982;&#20854;&#21253;&#21547;&#30340;&#23454;&#20307;&#20849;&#23384;&#20129;&#12290;&#30001;&#20110;&#23384;&#22312;&#24213;&#23618;&#30340;&#20851;&#32852;&#27169;&#22411;&#65292;&#38598;&#21512;&#19981;&#25903;&#25345;&#31354;&#20540;&#35821;&#20041;&#65307;&#24182;&#19988;hibernate&#19981;&#20250;&#21306;&#20998;&#19968;&#20010;null&#30340;&#38598;&#21512;&#24341;&#29992;&#21644;&#19968;&#20010;&#19981;&#23384;&#22312;&#20803;&#32032;&#30340;&#31354;&#38598;&#21512;&#12290;
            </p><p>
	            &#38598;&#21512;&#31867;&#22312;&#34987;&#19968;&#20010;&#25345;&#20037;&#21270;&#23545;&#35937;&#24341;&#29992;&#30340;&#26102;&#20505;&#65292;&#20250;&#33258;&#21160;&#25345;&#20037;&#21270;&#65292;&#24403;&#19981;&#20877;&#34987;&#24341;&#29992;&#26102;&#23558;&#20250;&#33258;&#21160;&#21024;&#38500;&#12290;&#22914;&#26524;&#19968;&#20010;&#38598;&#21512;&#34987;&#36125;&#20174;&#19968;&#20010;&#25345;&#20037;&#21270;&#23545;&#35937;&#20256;&#36882;&#21040;&#21478;&#19968;&#20010;&#65292;&#23427;&#30340;&#20803;&#32032;&#21487;&#35767;&#35767;&#20010;&#20250;&#20174;&#19968;&#20010;&#34920;&#36716;&#31227;&#21040;&#21478;&#19968;&#20010;&#34920;&#12290;&#20320;&#24212;&#35813;&#19981;&#38656;&#35201;&#23545;&#27492;&#29305;&#21035;&#20851;&#24515;&#12290;&#23601;&#22914;&#21516;&#20320;&#20351;&#29992;&#26222;&#36890;&#30340;Java&#38598;&#21512;&#31867;&#19968;&#26679;&#20351;&#29992;Hibernate&#30340;&#38598;&#21512;&#31867;&#65292;&#20294;&#26159;&#20320;&#38656;&#35201;&#30830;&#20449;&#20351;&#29992;&#21069;&#20320;&#29702;&#35299;&#20102;&#21452;&#21521;&#20851;&#32852;&#30340;&#35821;&#20041;&#65288;&#21518;&#38754;&#20250;&#35752;&#35770;&#65289;&#12290;
	        </p><p>
                &#38598;&#21512;&#23454;&#20363;&#22312;&#25968;&#25454;&#24211;&#20013;&#26681;&#25454;&#25351;&#21521;&#23545;&#24212;&#23454;&#20307;&#30340;&#22806;&#38190;&#32780;&#24471;&#21040;&#21306;&#21035;&#12290;&#36825;&#20010;&#22806;&#38190;&#34987;&#31216;&#20026;<span class="emphasis"><em>&#38598;&#21512;&#30340;&#20851;&#38190;&#23383;</em></span>&#12290;&#22312;Hibernate&#37197;&#32622;&#25991;&#20214;&#20013;&#20351;&#29992;<tt class="literal">&lt;key&gt;</tt> &#20803;&#32032;&#26469;&#26144;&#23556;&#36825;&#20010;&#38598;&#21512;&#30340;&#20851;&#38190;&#23383;&#12290;
            </p><p>
                &#38598;&#21512;&#21487;&#20197;&#21253;&#21547;&#20960;&#20046;&#25152;&#26377;&#30340;&#20854;&#20182;Hibernate&#31867;&#22411;, &#21253;&#25324;&#25152;&#26377;&#30340;&#22522;&#26412;&#31867;&#22411;, &#33258;&#23450;&#20041;&#31867;&#22411;,&#23454;&#20307;&#31867;&#22411;&#21644;&#32452;&#20214;&#12290;&#26377;&#19968;&#26465;&#37325;&#35201;&#30340;&#23450;&#20041;&#65306;&#22312;&#38598;&#21512;&#20013;&#30340;&#23545;&#35937;&#21487;&#20197;&#36890;&#36807;&#8220;&#20256;&#20540;&#8221;&#35821;&#20041;&#65288;&#23436;&#20840;&#20381;&#36182;&#20110;&#38598;&#21512;&#33258;&#36523;&#65289;&#25805;&#20316;&#65292;&#20063;&#21487;&#20197;&#26159;&#19968;&#20010;&#25351;&#21521;&#20854;&#20182;&#23454;&#20307;&#30340;&#24341;&#29992;&#65292;&#25317;&#26377;&#33258;&#24049;&#30340;&#29983;&#21629;&#21608;&#26399;&#12290;&#38598;&#21512;&#19981;&#33021;&#21253;&#21547;&#20854;&#20182;&#38598;&#21512;&#12290;&#36825;&#20123;&#34987;&#21253;&#21547;&#30340;&#20803;&#32032;&#30340;&#31867;&#22411;&#34987;&#31216;&#20026;<span class="emphasis"><em>&#38598;&#21512;&#20803;&#32032;&#31867;&#22411;</em></span>&#12290;&#38598;&#21512;&#30340;&#20803;&#32032;&#22312;Hibernate&#20013;&#34987;&#26144;&#23556;&#20026;<tt class="literal">&lt;element&gt;</tt>, <tt class="literal">&lt;composite-element&gt;</tt>, <tt class="literal">&lt;one-to-many&gt;</tt>, <tt class="literal">&lt;many-to-many&gt;</tt> &#25110;&#32773; <tt class="literal">&lt;many-to-any&gt;</tt>&#12290;&#21069;&#20004;&#31181;&#29992;&#20256;&#20540;&#35821;&#20041;&#25805;&#20316;&#20803;&#32032;&#65292;&#21478;&#22806;&#19977;&#31181;&#21017;&#26144;&#23556;&#23454;&#20307;&#20851;&#32852;&#12290;
            </p><p>
                &#38500;&#20102;<tt class="literal">Set</tt>&#21644;<tt class="literal">Bag</tt>&#20043;&#22806;&#30340;&#25152;&#26377;&#38598;&#21512;&#31867;&#22411;&#37117;&#26377;&#19968;&#20010;<span class="emphasis"><em>&#32034;&#24341;(index)</em></span>&#23383;&#27573;,&#36825;&#20010;&#23383;&#27573;&#26144;&#23556;&#21040;&#19968;&#20010;&#25968;&#32452;&#25110;&#32773;<tt class="literal">List</tt>&#30340;&#32034;&#24341;&#25110;&#32773;<tt class="literal">Map</tt>&#30340;key&#12290;Map&#30340;&#32034;&#24341;&#30340;&#31867;&#22411;&#21487;&#20197;&#26159;&#20219;&#20309;&#22522;&#26412;&#31867;&#22411;, &#23454;&#20307;&#31867;&#22411;&#25110;&#32773;&#29978;&#33267;&#26159;&#19968;&#20010;&#32452;&#21512;&#31867;&#22411;(&#20294;&#19981;&#33021;&#26159;&#19968;&#20010;&#38598;&#21512;&#31867;&#22411;)&#12290;&#25968;&#32452;&#21644;list&#30340;&#32034;&#24341;&#32943;&#23450;&#26159;&#25972;&#22411;,<tt class="literal">integer</tt>&#12290;&#22312;Hibernate&#37197;&#32622;&#25991;&#20214;&#20013;&#20351;&#29992; <tt class="literal">&lt;index&gt;</tt>, <tt class="literal">&lt;index-many-to-many&gt;</tt>, <tt class="literal">&lt;composite-index&gt;</tt> &#25110;&#32773; <tt class="literal">&lt;index-many-to-any&gt;</tt>&#31561;&#20803;&#32032;&#26469;&#26144;&#23556;&#32034;&#24341;&#12290;

            </p><p>
                &#38598;&#21512;&#31867;&#21487;&#20197;&#20135;&#29983;&#30456;&#24403;&#22810;&#31181;&#31867;&#30340;&#26144;&#23556;&#65292;&#28085;&#30422;&#20102;&#24456;&#22810;&#36890;&#24120;&#30340;&#20851;&#31995;&#27169;&#22411;&#12290;&#25105;&#20204;&#24314;&#35758;&#20320;&#32451;&#20064;&#20351;&#29992;schema&#29983;&#25104;&#24037;&#20855;, &#20197;&#20415;&#23545;&#22914;&#20309;&#25226;&#19981;&#21516;&#30340;&#26144;&#23556;&#23450;&#20041;&#36716;&#25442;&#20026;&#25968;&#25454;&#24211;&#34920;&#26377;&#19968;&#20010;&#24863;&#24615;&#35748;&#35782;&#12290;
                
            </p></div><div class="sect1" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="collections-mapping"></a>6.2.&nbsp;&#26144;&#23556;&#38598;&#21512;&#65288;Mapping a Collection&#65289;</h2></div></div><div></div></div><p>
                &#22312;Hibernate&#37197;&#32622;&#25991;&#20214;&#20013;&#20351;&#29992;<tt class="literal">&lt;set&gt;</tt>,
                <tt class="literal">&lt;list&gt;</tt>,
                <tt class="literal">&lt;map&gt;</tt>,
                <tt class="literal">&lt;bag&gt;</tt>,
                <tt class="literal">&lt;array&gt;</tt> &#21644;
                <tt class="literal">&lt;primitive-array&gt;</tt>&#31561;&#20803;&#32032;&#26469;&#23450;&#20041;&#38598;&#21512;,&#32780;<tt class="literal">&lt;map&gt;</tt>&#26159;&#26368;&#20856;&#22411;&#30340;&#19968;&#20010;&#12290;
            </p><div class="programlistingco"><pre class="programlisting">&lt;map
    name="propertyName"                                         <span class="co">(1)</span>
    table="table_name"                                          <span class="co">(2)</span>
    schema="schema_name"                                        <span class="co">(3)</span>
    lazy="true|false"                                           <span class="co">(4)</span>
    inverse="true|false"                                        <span class="co">(5)</span>
    cascade="all|none|save-update|delete|all-delete-orphan"     <span class="co">(6)</span>
    sort="unsorted|natural|comparatorClass"                     <span class="co">(7)</span>
    order-by="column_name asc|desc"                             <span class="co">(8)</span>
    where="arbitrary sql where condition"                       <span class="co">(9)</span>
    outer-join="true|false|auto"                                <span class="co">(10)</span>
    batch-size="N"                                              <span class="co">(11)</span>
    access="field|property|ClassName"                           <span class="co">(12)</span>
&gt;

    &lt;key .... /&gt;
    &lt;index .... /&gt;
    &lt;element .... /&gt;
&lt;/map&gt;</pre><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left">(1)</td><td valign="top" align="left"><p>
                            <tt class="literal">name</tt> &#38598;&#21512;&#23646;&#24615;&#30340;&#21517;&#31216;
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(2)</td><td valign="top" align="left"><p>
							<tt class="literal">table</tt> &#65288;&#21487;&#36873;&#8212;&#8212;&#40664;&#35748;&#20026;&#23646;&#24615;&#30340;&#21517;&#31216;&#65289;&#36825;&#20010;&#38598;&#21512;&#34920;&#30340;&#21517;&#31216;(&#19981;&#33021;&#22312;&#19968;&#23545;&#22810;&#30340;&#20851;&#32852;&#20851;&#31995;&#20013;&#20351;&#29992;)
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(3)</td><td valign="top" align="left"><p>
                            <tt class="literal">schema</tt> (&#21487;&#36873;) &#34920;&#30340;schema&#30340;&#21517;&#31216;, &#20182;&#23558;&#35206;&#30422;&#22312;&#26681;&#20803;&#32032;&#20013;&#23450;&#20041;&#30340;schema
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(4)</td><td valign="top" align="left"><p>
                            <tt class="literal">lazy</tt> (&#21487;&#36873;&#8212;&#8212;&#40664;&#35748;&#20026;<tt class="literal">false</tt>)
                            lazy(&#21487;&#36873;--&#40664;&#35748;&#20026;false) &#20801;&#35768;&#24310;&#36831;&#21152;&#36733;&#65288;lazy initialization &#65289;(&#19981;&#33021;&#22312;&#25968;&#32452;&#20013;&#20351;&#29992;)
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(5)</td><td valign="top" align="left"><p>
                            <tt class="literal">inverse</tt> (&#21487;&#36873;&#8212;&#8212;&#40664;&#35748;&#20026;<tt class="literal">false</tt>)
                            &#26631;&#35760;&#36825;&#20010;&#38598;&#21512;&#20316;&#20026;&#21452;&#21521;&#20851;&#32852;&#20851;&#31995;&#20013;&#30340;&#26041;&#21521;&#19968;&#31471;&#12290;

                        </p></td></tr><tr><td width="5%" valign="top" align="left">(6)</td><td valign="top" align="left"><p>
                            <tt class="literal">cascade</tt> (&#21487;&#36873;&#8212;&#8212;&#40664;&#35748;&#20026;<tt class="literal">none</tt>)
                            &#35753;&#25805;&#20316;&#32423;&#32852;&#21040;&#23376;&#23454;&#20307;
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(7)</td><td valign="top" align="left"><p>
                            <tt class="literal">sort</tt>(&#21487;&#36873;)&#25351;&#23450;&#38598;&#21512;&#30340;&#25490;&#24207;&#39034;&#24207;, &#20854;&#21487;&#20197;&#20026;&#33258;&#28982;&#30340;(<tt class="literal">natural</tt>)&#25110;&#32773;&#32473;&#23450;&#19968;&#20010;&#29992;&#26469;&#27604;&#36739;&#30340;&#31867;&#12290;

                        </p></td></tr><tr><td width="5%" valign="top" align="left">(8)</td><td valign="top" align="left"><p>
                            <tt class="literal">order-by</tt> (&#21487;&#36873;, &#20165;&#29992;&#20110;jdk1.4) &#25351;&#23450;&#34920;&#30340;&#23383;&#27573;(&#19968;&#20010;&#25110;&#20960;&#20010;)&#20877;&#21152;&#19978;asc&#25110;&#32773;desc(&#21487;&#36873;), &#23450;&#20041;Map,Set&#21644;Bag&#30340;&#36845;&#20195;&#39034;&#24207;
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(9)</td><td valign="top" align="left"><p>
                            <tt class="literal">where</tt> (&#21487;&#36873;) &#25351;&#23450;&#20219;&#24847;&#30340;SQL where&#26465;&#20214;, &#35813;&#26465;&#20214;&#23558;&#22312;&#37325;&#26032;&#36733;&#20837;&#25110;&#32773;&#21024;&#38500;&#36825;&#20010;&#38598;&#21512;&#26102;&#20351;&#29992;(&#24403;&#38598;&#21512;&#20013;&#30340;&#25968;&#25454;&#20165;&#20165;&#26159;&#25152;&#26377;&#21487;&#29992;&#25968;&#25454;&#30340;&#19968;&#20010;&#23376;&#38598;&#26102;&#36825;&#20010;&#26465;&#20214;&#38750;&#24120;&#26377;&#29992;)
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(10)</td><td valign="top" align="left"><p>
                            <tt class="literal">outer-join</tt>(&#21487;&#36873;)&#25351;&#23450;&#36825;&#20010;&#38598;&#21512;,&#21482;&#35201;&#21487;&#33021;,&#24212;&#35813;&#36890;&#36807;&#22806;&#36830;&#25509;(outer join)&#21462;&#24471;&#12290;&#22312;&#27599;&#19968;&#20010;SQL&#35821;&#21477;&#20013;, &#21482;&#33021;&#26377;&#19968;&#20010;&#38598;&#21512;&#21487;&#20197;&#34987;&#36890;&#36807;&#22806;&#36830;&#25509;&#25235;&#21462;(&#35793;&#32773;&#27880;: &#36825;&#37324;&#25552;&#21040;&#30340;SQL&#35821;&#21477;&#26159;&#21462;&#24471;&#38598;&#21512;&#25152;&#23646;&#31867;&#30340;&#25968;&#25454;&#30340;Select&#35821;&#21477;)
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(11)</td><td valign="top" align="left"><p>
                            <tt class="literal">batch-size</tt> (&#21487;&#36873;, &#40664;&#35748;&#20026;<tt class="literal">1</tt>) &#25351;&#23450;&#36890;&#36807;&#24310;&#36831;&#21152;&#36733;&#21462;&#24471;&#38598;&#21512;&#23454;&#20363;&#30340;&#25209;&#22788;&#29702;&#22359;&#22823;&#23567;&#65288;"batch size"&#65289;&#12290;
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(12)</td><td valign="top" align="left"><p>
                            <tt class="literal">access</tt>(&#21487;&#36873;-&#40664;&#35748;&#20026;&#23646;&#24615;property):Hibernate&#21462;&#24471;&#23646;&#24615;&#20540;&#26102;&#20351;&#29992;&#30340;&#31574;&#30053;
                        </p></td></tr></table></div></div><p>
                &#24314;&#31435;<tt class="literal">&#21015;&#34920;(List)</tt>&#21644;<tt class="literal">&#25968;&#32452;(Array)</tt>&#38656;&#35201;&#19968;&#20010;&#21333;&#29420;&#34920;&#23383;&#27573;&#29992;&#26469;&#20445;&#23384;&#21015;&#34920;(List)&#25110;&#25968;&#32452;(Array)&#30340;&#32034;&#24341;(<tt class="literal">foo[i]</tt>&#20013;&#30340;<tt class="literal">i</tt>)&#12290;&#22914;&#26524;&#20320;&#30340;&#20851;&#31995;&#27169;&#22411;&#20013;&#27809;&#26377;&#19968;&#20010;&#32034;&#24341;&#23383;&#27573;, &#20363;&#22914;:&#22914;&#26524;&#20320;&#22788;&#29702;&#30340;&#26159;&#32769;&#24335;&#30340;&#36951;&#30041;&#25968;&#25454;, &#20320;&#21487;&#20197;&#29992;&#26080;&#24207;&#30340;<tt class="literal">Set</tt>&#26469;&#26367;&#20195;&#12290;&#36825;&#20250;&#35753;&#37027;&#20123;&#20197;&#20026;<tt class="literal">List</tt>&#24212;&#35813;&#26159;&#35775;&#38382;&#26080;&#24207;&#38598;&#21512;&#30340;&#27604;&#36739;&#26041;&#20415;&#30340;&#26041;&#27861;&#30340;&#20154;&#24863;&#21040;&#27668;&#39297;&#12290;Hibernate&#38598;&#21512;&#20005;&#26684;&#36981;&#23432;Set,List&#21644;Map&#25509;&#21475;&#20013;&#21253;&#28085;&#30340;&#33258;&#28982;&#35821;&#20041;&#12290; <tt class="literal">List</tt>&#20803;&#32032;&#19981;&#33021;&#27491;&#30830;&#30340;&#33258;&#21457;&#23545;&#20182;&#20204;&#33258;&#24049;&#36827;&#34892;&#25490;&#24207;&#65281;
            </p><p>
                &#22312;&#21478;&#19968;&#26041;&#38754;, &#37027;&#20123;&#20934;&#22791;&#20351;&#29992;<tt class="literal">List</tt>&#26469;&#27169;&#25311;<span class="emphasis"><em>bag</em></span>&#30340;&#35821;&#20041;&#30340;&#20154;&#26377;&#19968;&#20010;&#21512;&#27861;&#30340;&#22996;&#23624;(a legitimate grievance)&#12290;bag&#26159;&#19968;&#20010;&#26080;&#24207;,&#27809;&#26377;&#32034;&#24341;&#30340;&#38598;&#21512;&#24182;&#19988;&#21487;&#33021;&#21253;&#21547;&#22810;&#20010;&#30456;&#21516;&#30340;&#20803;&#32032;&#12290;&#22312;Java&#38598;&#21512;&#26694;&#26550;&#20013;&#27809;&#26377;<tt class="literal">Bag</tt>&#25509;&#21475;&#65292;&#20294;&#26159;&#20320;&#24517;&#39035;&#29992;List&#27169;&#25311;&#23427;&#12290;Hibernate&#20801;&#35768;&#20320;&#26144;&#23556;&#31867;&#22411;&#20026;<tt class="literal">List</tt>&#25110;&#32773;<tt class="literal">Collection</tt>&#30340;&#23646;&#24615;&#21040;<tt class="literal">&lt;bag&gt;</tt>&#20803;&#32032;&#12290;&#27880;&#24847;: Bag&#35821;&#20041;&#20107;&#23454;&#19978;&#24182;&#19981;&#26159;Collection&#35268;&#33539;(contract)&#30340;&#19968;&#37096;&#20998;&#24182;&#19988;&#20107;&#23454;&#19978;&#23427;&#21644;<tt class="literal">List</tt>&#35268;&#33539;&#20013;&#30340;&#35821;&#20041;&#26159;&#30456;&#30683;&#30462;&#30340;&#12290;(&#28982;&#32780;&#65292;&#20320;&#21487;&#20197;&#23545;bag&#20219;&#24847;&#25490;&#24207;&#65292;&#22312;&#26412;&#31456;&#21518;&#38754;&#21152;&#20197;&#35752;&#35770;&#12290;)
            </p><p>
                &#27880;&#24847;&#65306;&#20855;&#26377;<tt class="literal">inverse="false"</tt>&#26631;&#35760;&#30340;&#22823;&#22411;Hibernate bag&#25928;&#29575;&#26159;&#30456;&#24403;&#20302;&#30340;&#65292;&#24212;&#35813;&#23613;&#37327;&#36991;&#20813;&#12290;Hibernate&#26080;&#27861;&#21019;&#24314;,&#21024;&#38500;&#21644;&#26356;&#26032;&#23427;&#30340;&#21333;&#20010;&#35760;&#24405;, &#22240;&#20026;&#20182;&#20204;&#27809;&#26377;&#20851;&#38190;&#23383;&#26469;&#35782;&#21035;&#21333;&#20010;&#35760;&#24405;&#12290;
            </p></div><div class="sect1" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="collections-ofvalues"></a>6.3.&nbsp;&#20540;&#38598;&#21512;&#21644;&#22810;&#23545;&#22810;&#20851;&#32852;(Collections of Values and Many-To-Many Associations)</h2></div></div><div></div></div><p>
                &#20219;&#20309;&#20540;&#38598;&#21512;&#21644;&#23454;&#20307;&#38598;&#21512;&#22914;&#26524;&#34987;&#26144;&#23556;&#20026;&#22810;&#23545;&#22810;&#20851;&#32852;(Java&#38598;&#21512;&#20013;&#30340;&#35821;&#20041;)&#23601;&#38656;&#35201;&#19968;&#20010;&#38598;&#21512;&#34920;&#12290;&#36825;&#20010;&#34920;&#20013;&#21253;&#21547;&#22806;&#38190;&#23383;&#27573;,&#20803;&#32032;&#23383;&#27573;&#36824;&#21487;&#33021;&#26377;&#32034;&#24341;&#23383;&#27573;&#12290;
            </p><p>
                &#20351;&#29992;<tt class="literal">&lt;key&gt;</tt>&#20803;&#32032;&#26469;&#30003;&#26126;&#20174;&#38598;&#21512;&#34920;&#21040;&#20854;&#25317;&#26377;&#32773;&#31867;&#30340;&#34920;(from the collection table to the table of the owning class)&#30340;&#22806;&#38190;&#20851;&#38190;&#23383;&#12290;
            </p><div class="programlistingco"><pre class="programlisting">&lt;key column="column_name"/&gt;</pre><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left">(1)</td><td valign="top" align="left"><p>
                            <tt class="literal">column</tt>(&#24517;&#38656;):&#22806;&#38190;&#23383;&#27573;&#30340;&#21517;&#31216;
                        </p></td></tr></table></div></div><p>
                &#23545;&#20110;&#31867;&#20284;&#19982;map&#21644;list&#30340;&#24102;&#32034;&#24341;&#30340;&#38598;&#21512;, &#25105;&#20204;&#38656;&#35201;&#19968;&#20010;<tt class="literal">&lt;index&gt;</tt>&#20803;&#32032;&#12290;&#23545;&#20110;list&#26469;&#35828;, &#36825;&#20010;&#23383;&#27573;&#21253;&#21547;&#20174;&#38646;&#24320;&#22987;&#30340;&#36830;&#32493;&#25972;&#25968;&#12290;&#22914;&#26524;&#20320;&#35201;&#22788;&#29702;&#36951;&#30041;&#30340;&#32769;&#24335;&#25968;&#25454;&#65292;&#35831;&#30830;&#20445;&#20320;&#30340;index&#30495;&#30340;&#26159;&#20174;0&#24320;&#22987;&#35745;&#25968;&#30340;&#12290;&#23545;&#20110;map&#26469;&#35828;,&#36825;&#20010;&#23383;&#27573;&#21487;&#20197;&#21253;&#21547;&#20219;&#24847;Hibernate&#31867;&#22411;&#30340;&#20540;&#12290;
            </p><div class="programlistingco"><pre class="programlisting">&lt;index
        column="column_name"                <span class="co">(1)</span>
        type="typename"                     <span class="co">(2)</span>
/&gt;</pre><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left">(1)</td><td valign="top" align="left"><p>
                            <tt class="literal">column</tt>(&#24517;&#38656;):&#20445;&#23384;&#38598;&#21512;&#32034;&#24341;&#20540;&#30340;&#23383;&#27573;&#21517;&#12290;
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(2)</td><td valign="top" align="left"><p>
                            <tt class="literal">type</tt> (&#21487;&#36873;,&#40664;&#35748;&#20026;&#25972;&#22411;<tt class="literal">integer</tt>):&#38598;&#21512;&#32034;&#24341;&#30340;&#31867;&#22411;&#12290;
                        </p></td></tr></table></div></div><p>
                &#36824;&#26377;&#21478;&#22806;&#19968;&#20010;&#36873;&#25321;,map&#21487;&#20197;&#26159;&#23454;&#20307;&#31867;&#22411;&#30340;&#23545;&#35937;&#12290;&#22312;&#36825;&#37324;&#25105;&#20204;&#20351;&#29992;<tt class="literal">&lt;index-many-to-many&gt;</tt>&#20803;&#32032;&#12290;
            </p><div class="programlistingco"><pre class="programlisting">&lt;index-many-to-many
        column="column_name"                <span class="co">(1)</span>
        class="ClassName"                   <span class="co">(2)</span>
/&gt;</pre><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left">(1)</td><td valign="top" align="left"><p>
							<tt class="literal">column</tt>(&#24517;&#38656;):&#38598;&#21512;&#32034;&#24341;&#20540;&#20013;&#22806;&#38190;&#23383;&#27573;&#30340;&#21517;&#31216;
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(2)</td><td valign="top" align="left"><p>
                            <tt class="literal">class</tt> (required):(&#24517;&#38656;):&#38598;&#21512;&#30340;&#32034;&#24341;&#20351;&#29992;&#30340;&#23454;&#20307;&#31867;&#12290;
                        </p></td></tr></table></div></div><p>
                &#23545;&#20110;&#19968;&#20010;&#20540;&#38598;&#21512;, &#25105;&#20204;&#20351;&#29992;<tt class="literal">&lt;element&gt;</tt>&#26631;&#31614;&#12290;
            </p><div class="programlistingco"><pre class="programlisting">&lt;element
        column="column_name"                <span class="co">(1)</span>
        type="typename"                     <span class="co">(2)</span>
/&gt;</pre><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left">(1)</td><td valign="top" align="left"><p>
                            <tt class="literal">column</tt>(&#24517;&#38656;):&#20445;&#23384;&#38598;&#21512;&#20803;&#32032;&#20540;&#30340;&#23383;&#27573;&#21517;&#12290;
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(2)</td><td valign="top" align="left"><p>
                            <tt class="literal">type</tt> (&#24517;&#38656;):&#38598;&#21512;&#20803;&#32032;&#30340;&#31867;&#22411;
                        </p></td></tr></table></div></div><p>
&#19968;&#20010;&#25317;&#26377;&#33258;&#24049;&#34920;&#30340;&#23454;&#20307;&#38598;&#21512;&#23545;&#24212;&#20110;<span class="emphasis"><em>&#22810;&#23545;&#22810;(many-to-many)&#20851;&#32852;</em></span>&#20851;&#31995;&#27010;&#24565;&#12290;&#22810;&#23545;&#22810;&#20851;&#32852;&#26159;&#38024;&#23545;Java&#38598;&#21512;&#30340;&#26368;&#33258;&#28982;&#26144;&#23556;&#20851;&#32852;&#20851;&#31995;&#65292;&#20294;&#36890;&#24120;&#24182;&#19981;&#26159;&#26368;&#22909;&#30340;&#20851;&#31995;&#27169;&#22411;&#12290;
            </p><div class="programlistingco"><pre class="programlisting">&lt;many-to-many
        column="column_name"                               <span class="co">(1)</span>
        class="ClassName"                                  <span class="co">(2)</span>
        outer-join="true|false|auto"                       <span class="co">(3)</span>
/&gt;</pre><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left">(1)</td><td valign="top" align="left"><p>
                            <tt class="literal">column</tt>(&#24517;&#38656;): &#36825;&#20010;&#20803;&#32032;&#30340;&#22806;&#38190;&#20851;&#38190;&#23383;&#27573;&#21517;
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(2)</td><td valign="top" align="left"><p>
                            <tt class="literal">class</tt> (&#24517;&#38656;): &#20851;&#32852;&#31867;&#30340;&#21517;&#31216;
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(3)</td><td valign="top" align="left"><p>
							<tt class="literal">outer-join</tt> (&#21487;&#36873; - &#40664;&#35748;&#20026;<tt class="literal">auto</tt>):
							&#22312;Hibernate&#31995;&#32479;&#21442;&#25968;&#20013;<tt class="literal">hibernate.use_outer_join</tt>&#34987;&#25171;&#24320;&#30340;&#24773;&#20917;&#19979;,&#35813;&#21442;&#25968;&#29992;&#26469;&#20801;&#35768;&#20351;&#29992;outer join&#26469;&#36733;&#20837;&#27492;&#38598;&#21512;&#30340;&#25968;&#25454;&#12290;
                        </p></td></tr></table></div></div><p>
                &#20363;&#23376;&#65306;&#39318;&#20808;, &#19968;&#32452;&#23383;&#31526;&#20018;&#65306;
            </p><pre class="programlisting">&lt;set name="names" table="NAMES"&gt;
    &lt;key column="GROUPID"/&gt;
    &lt;element column="NAME" type="string"/&gt;
&lt;/set&gt;</pre><p>
                &#21253;&#21547;&#19968;&#32452;&#25972;&#25968;&#30340;bag(&#36824;&#35774;&#32622;&#20102;<tt class="literal">order-by</tt>&#21442;&#25968;&#25351;&#23450;&#20102;&#36845;&#20195;&#30340;&#39034;&#24207;)&#65306;
            </p><pre class="programlisting">&lt;bag name="sizes" table="SIZES" order-by="SIZE ASC"&gt;
    &lt;key column="OWNER"/&gt;
    &lt;element column="SIZE" type="integer"/&gt;
&lt;/bag&gt;</pre><p>
                &#19968;&#20010;&#23454;&#20307;&#25968;&#32452;,&#22312;&#36825;&#20010;&#26696;&#20363;&#20013;&#26159;&#19968;&#20010;&#22810;&#23545;&#22810;&#30340;&#20851;&#32852;(&#27880;&#24847;&#36825;&#37324;&#30340;&#23454;&#20307;&#26159;&#33258;&#21160;&#31649;&#29702;&#29983;&#21629;&#21608;&#26399;&#30340;&#23545;&#35937;&#65288;lifecycle objects&#65289;,<tt class="literal">cascade="all"</tt>):
            </p><pre class="programlisting">&lt;array name="foos" table="BAR_FOOS" cascade="all"&gt;
    &lt;key column="BAR_ID"/&gt;
    &lt;index column="I"/&gt;
    &lt;many-to-many column="FOO_ID" class="org.hibernate.Foo"/&gt;
&lt;/array&gt;</pre><p>
                &#19968;&#20010;map,&#36890;&#36807;&#23383;&#31526;&#20018;&#30340;&#32034;&#24341;&#26469;&#25351;&#26126;&#26085;&#26399;&#65306;
            </p><pre class="programlisting">&lt;map name="holidays" table="holidays" schema="dbo" order-by="hol_name asc"&gt;
    &lt;key column="id"/&gt;
    &lt;index column="hol_name" type="string"/&gt;
    &lt;element column="hol_date" type="date"/&gt;
&lt;/map&gt;</pre><p>
                &#19968;&#20010;&#32452;&#20214;&#30340;&#21015;&#34920;&#65306;&#65288;&#19979;&#19968;&#31456;&#35752;&#35770;&#65289;
            </p><pre class="programlisting">&lt;list name="carComponents" table="car_components"&gt;
    &lt;key column="car_id"/&gt;
    &lt;index column="posn"/&gt;
    &lt;composite-element class="org.hibernate.car.CarComponent"&gt;
            &lt;property name="price" type="float"/&gt;
            &lt;property name="type" type="org.hibernate.car.ComponentType"/&gt;
            &lt;property name="serialNumber" column="serial_no" type="string"/&gt;
    &lt;/composite-element&gt;
&lt;/list&gt;</pre></div><div class="sect1" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="collections-onetomany"></a>6.4.&nbsp;&#19968;&#23545;&#22810;&#20851;&#32852;&#65288;One-To-Many Associations&#65289;</h2></div></div><div></div></div><p>
                <span class="emphasis"><em>&#19968;&#23545;&#22810;&#20851;&#32852;</em></span><span class="emphasis"><em>&#30452;&#25509;</em></span>&#36830;&#25509;&#20004;&#20010;&#31867;&#23545;&#24212;&#30340;&#34920;,&#32780;&#27809;&#26377;&#20013;&#38388;&#38598;&#21512;&#34920;&#12290;(&#36825;&#23454;&#29616;&#20102;&#19968;&#20010;<span class="emphasis"><em>&#19968;&#23545;&#22810;</em></span>&#30340;&#20851;&#31995;&#27169;&#22411;)(&#35793;&#32773;&#27880;:&#36825;&#26377;&#21035;&#19982;&#22810;&#23545;&#22810;&#30340;&#20851;&#32852;&#38656;&#35201;&#19968;&#24352;&#20013;&#38388;&#34920;)&#12290; &#36825;&#20010;&#20851;&#31995;&#27169;&#22411;&#22833;&#21435;&#20102;&#19968;&#20123;Java&#38598;&#21512;&#30340;&#35821;&#20041;:
            </p><div class="itemizedlist"><ul type="disc" compact><li><p>
			            map,set&#25110;list&#20013;&#19981;&#33021;&#21253;&#21547;null&#20540;
                    </p></li><li><p>
                        &#19968;&#20010;&#34987;&#21253;&#21547;&#30340;&#23454;&#20307;&#30340;&#23454;&#20363;&#21482;&#33021;&#34987;&#21253;&#21547;&#22312;&#19968;&#20010;&#38598;&#21512;&#30340;&#23454;&#20363;&#20013;
                    </p></li><li><p>
                        &#19968;&#20010;&#34987;&#21253;&#21547;&#30340;&#23454;&#20307;&#30340;&#23454;&#20363;&#21482;&#33021;&#23545;&#24212;&#20110;&#38598;&#21512;&#32034;&#24341;&#30340;&#19968;&#20010;&#20540;&#20013;
                    </p></li></ul></div><p>
                &#19968;&#20010;&#20174;<tt class="literal">Foo</tt>&#21040;<tt class="literal">Bar</tt>&#30340;&#20851;&#32852;&#38656;&#35201;&#39069;&#22806;&#30340;&#20851;&#38190;&#23383;&#23383;&#27573;,&#21487;&#33021;&#36824;&#26377;&#19968;&#20010;&#32034;&#24341;&#23383;&#27573;&#25351;&#21521;&#36825;&#20010;&#34987;&#21253;&#21547;&#30340;&#23454;&#20307;&#31867;,<tt class="literal">Bar</tt>&#25152;&#23545;&#24212;&#30340;&#34920;&#12290;&#36825;&#20123;&#23383;&#27573;&#22312;&#26144;&#23556;&#26102;&#20351;&#29992;&#21069;&#38754;&#25552;&#21040;&#30340;<tt class="literal">&lt;key&gt;</tt>&#21644;<tt class="literal">&lt;index&gt;</tt>&#20803;&#32032;&#12290;
            </p><p>
                <tt class="literal">&lt;one-to-many&gt;</tt>&#26631;&#35760;&#25351;&#26126;&#20102;&#19968;&#20010;&#19968;&#23545;&#22810;&#30340;&#20851;&#32852;&#12290;
            </p><div class="programlistingco"><pre class="programlisting">&lt;one-to-many class="ClassName"/&gt;</pre><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left">(1)</td><td valign="top" align="left"><p>
                            <tt class="literal">class</tt>(&#24517;&#39035;):&#34987;&#20851;&#32852;&#31867;&#30340;&#21517;&#31216;&#12290;
                        </p></td></tr></table></div></div><p>
                &#20363;&#23376;
            </p><pre class="programlisting">&lt;set name="bars"&gt;
    &lt;key column="foo_id"/&gt;
    &lt;one-to-many class="org.hibernate.Bar"/&gt;
&lt;/set&gt;</pre><p>
                &#27880;&#24847;:<tt class="literal">&lt;one-to-many&gt;</tt>&#20803;&#32032;&#19981;&#38656;&#35201;&#23450;&#20041;&#20219;&#20309;&#23383;&#27573;&#12290; &#20063;&#19981;&#38656;&#35201;&#25351;&#23450;&#34920;&#21517;&#12290;
                
            </p><p>
                <span class="emphasis"><em>&#37325;&#35201;&#25552;&#31034;</em></span>:&#22914;&#26524;<tt class="literal">&#19968;&#23545;&#22810;</tt>&#20851;&#32852;&#20013;&#30340;<tt class="literal">&lt;key&gt;</tt>&#23383;&#27573;&#23450;&#20041;&#25104;<tt class="literal">NOT NULL</tt>,&#37027;&#20040;&#24403;&#21019;&#24314;&#21644;&#26356;&#26032;&#20851;&#32852;&#20851;&#31995;&#26102;Hibernate&#21487;&#33021;&#24341;&#36215;&#32422;&#26463;&#36829;&#20363;&#12290;&#20026;&#20102;&#39044;&#38450;&#36825;&#20010;&#38382;&#39064;,<span class="emphasis"><em>&#20320;&#24517;&#39035;&#20351;&#29992;&#21452;&#21521;&#20851;&#32852;</em></span>&#65292;&#24182;&#19988;&#22312;&#8220;&#22810;&#8221;&#36825;&#19968;&#31471;&#65288;Set&#25110;&#32773;&#26159;bag)&#25351;&#26126;<tt class="literal">inverse="true"</tt>&#12290;&#21442;&#38405;&#26412;&#31456;&#21518;&#38754;&#20851;&#20110;&#21452;&#21521;&#20851;&#32852;&#30340;&#35752;&#35770;&#12290;
            </p></div><div class="sect1" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="collections-lazy"></a>6.5.&nbsp;&#24310;&#36831;&#21021;&#22987;&#21270;(&#24310;&#36831;&#21152;&#36733;)&#65288;Lazy Initialization&#65289;</h2></div></div><div></div></div><p><a name="collections-lazy-translate-comment-zh-cn"></a>
			(&#35793;&#32773;&#27880;: &#26412;&#32763;&#35793;&#31295;&#20013;&#65292;&#23545;Lazy Initiazation&#21644;Eager fetch&#20013;&#30340;lazy,eager&#37319;&#21462;&#24847;&#35793;&#30340;&#26041;&#24335;&#65292;&#20998;&#21035;&#32763;&#35793;&#20026;&#24310;&#36831;&#21021;&#22987;&#21270;&#21644;&#39044;&#20808;&#25235;&#21462;&#12290;lazt initiazation&#23601;&#26159;&#25351;&#30452;&#21040;&#31532;&#19968;&#27425;&#35843;&#29992;&#26102;&#25165;&#21152;&#36733;&#12290;&#65289;
			</p><p>
                &#38598;&#21512;(&#19981;&#21253;&#25324;&#25968;&#32452;)&#26159;&#21487;&#20197;&#24310;&#36831;&#21021;&#22987;&#21270;&#30340;,&#24847;&#24605;&#26159;&#20165;&#20165;&#24403;&#24212;&#29992;&#31243;&#24207;&#38656;&#35201;&#35775;&#38382;&#26102;&#65292;&#25165;&#36733;&#20837;&#20182;&#20204;&#30340;&#20540;&#12290;&#23545;&#20110;&#20351;&#29992;&#32773;&#26469;&#35828;&#65292;&#21021;&#22987;&#21270;&#26159;&#36879;&#26126;&#30340;, &#22240;&#27492;&#24212;&#29992;&#31243;&#24207;&#36890;&#24120;&#19981;&#38656;&#35201;&#20851;&#24515;&#36825;&#20010;(&#20107;&#23454;&#19978;,&#36879;&#26126;&#30340;&#24310;&#36831;&#21152;&#36733;&#20063;&#23601;&#26159;&#20026;&#20160;&#20040;Hibernate&#38656;&#35201;&#33258;&#24049;&#30340;&#38598;&#21512;&#23454;&#29616;&#30340;&#20027;&#35201;&#21407;&#22240;)&#12290;&#20294;&#26159;, &#22914;&#20309;&#24212;&#29992;&#31243;&#24207;&#35797;&#22270;&#25191;&#34892;&#20197;&#19979;&#31243;&#24207;:
            </p><pre class="programlisting">s = sessions.openSession();
User u = (User) s.find("from User u where u.name=?", userName, Hibernate.STRING).get(0);
Map permissions = u.getPermissions();
s.connection().commit();
s.close();

Integer accessLevel = (Integer) permissions.get("accounts");  // Error!</pre><p>
                &#36825;&#20010;&#38169;&#35823;&#21487;&#33021;&#20196;&#20320;&#24863;&#21040;&#24847;&#22806;&#12290;&#22240;&#20026;&#22312;&#36825;&#20010;<tt class="literal">Session</tt>&#34987;&#25552;&#20132;(commit)&#20043;&#21069;, permissions&#27809;&#26377;&#34987;&#21021;&#22987;&#21270;,&#37027;&#20040;&#36825;&#20010;&#38598;&#21512;&#23558;&#27704;&#36828;&#19981;&#33021;&#36733;&#20837;&#20182;&#30340;&#25968;&#25454;&#20102;&#12290; &#35299;&#20915;&#26041;&#27861;&#26159;&#25226;&#35835;&#21462;&#38598;&#21512;&#25968;&#25454;&#30340;&#35821;&#21477;&#25552;&#21040;Session&#34987;&#25552;&#20132;&#20043;&#21069;&#12290;(&#28982;&#32780;&#65292;&#36824;&#26377;&#19968;&#31181;&#26356;&#20808;&#36827;&#30340;&#26041;&#27861;&#26469;&#35299;&#20915;&#36825;&#20010;&#38382;&#39064;&#12290;)
            </p><p>
                &#21478;&#22806;&#19968;&#31181;&#36873;&#25321;&#26159;&#19981;&#20351;&#29992;&#24310;&#36831;&#21021;&#22987;&#21270;&#38598;&#21512;&#12290;&#26082;&#28982;&#24310;&#36831;&#21021;&#22987;&#21270;&#21487;&#33021;&#24341;&#36215;&#19978;&#38754;&#36825;&#26679;&#38169;&#35823;,&#40664;&#35748;&#26159;&#19981;&#20351;&#29992;&#24310;&#36831;&#21021;&#22987;&#21270;&#30340;&#12290;&#20294;&#26159;, &#20026;&#20102;&#25928;&#29575;&#30340;&#21407;&#22240;, &#25105;&#20204;&#24076;&#26395;&#23545;&#32477;&#22823;&#22810;&#25968;&#38598;&#21512;(&#29305;&#21035;&#26159;&#23454;&#20307;&#38598;&#21512;)&#20351;&#29992;&#24310;&#36831;&#21021;&#22987;&#21270;&#12290;
            </p><p>
                &#24310;&#36831;&#21021;&#22987;&#21270;&#38598;&#21512;&#26102;&#21457;&#29983;&#30340;&#20363;&#22806;&#34987;&#23553;&#35013;&#22312;<tt class="literal">LazyInitializationException</tt>&#20013;&#12290;
            </p><p>
                &#20351;&#29992;&#21487;&#36873;&#30340; <tt class="literal">lazy</tt> &#23646;&#24615;&#26469;&#23450;&#20041;&#24310;&#36831;&#21021;&#22987;&#21270;&#38598;&#21512;&#65306;
            </p><pre class="programlisting">&lt;set name="names" table="NAMES" lazy="true"&gt;
    &lt;key column="group_id"/&gt;
    &lt;element column="NAME" type="string"/&gt;
&lt;/set&gt;</pre><p>
                &#22312;&#19968;&#20123;&#24212;&#29992;&#31243;&#24207;&#30340;&#20307;&#31995;&#32467;&#26500;&#20013;,&#29305;&#21035;&#26159;&#20351;&#29992;hibernate&#35775;&#38382;&#25968;&#25454;&#30340;&#32467;&#26500;, &#20195;&#30721;&#21487;&#33021;&#20250;&#29992;&#22312;&#19981;&#29992;&#30340;&#24212;&#29992;&#23618;&#20013;, &#21487;&#33021;&#27809;&#26377;&#21150;&#27861;&#20445;&#35777;&#24403;&#19968;&#20010;&#38598;&#21512;&#22312;&#21021;&#22987;&#21270;&#30340;&#26102;&#20505;, session&#20173;&#28982;&#25171;&#24320;&#30528;&#12290; &#36825;&#37324;&#26377;&#20004;&#20010;&#22522;&#26412;&#26041;&#27861;&#26469;&#35299;&#20915;&#36825;&#20010;&#38382;&#39064;&#65306;
            </p><div class="itemizedlist"><ul type="disc"><li><p>
                        &#22312;&#22522;&#20110;Web&#30340;&#24212;&#29992;&#31243;&#24207;&#20013;, &#19968;&#20010;servlet&#36807;&#28388;&#22120;&#21487;&#20197;&#29992;&#26469;&#22312;&#29992;&#25143;&#35831;&#27714;&#30340;&#23436;&#25104;&#20043;&#21069;&#26469;&#20851;&#38381;<tt class="literal">Session</tt>&#12290;&#24403;&#28982;,&#36825;&#20010;&#22320;&#26041;(&#20851;&#38381;session)&#20005;&#37325;&#20381;&#36182;&#20110;&#20320;&#30340;&#24212;&#29992;&#31243;&#24207;&#32467;&#26500;&#20013;&#20363;&#22806;&#22788;&#29702;&#30340;&#27491;&#30830;&#24615;&#12290;&#22312;&#35831;&#27714;&#36820;&#22238;&#32473;&#29992;&#25143;&#20043;&#21069;&#20851;&#38381;<tt class="literal">Session</tt>&#21644;&#32467;&#26463;&#20107;&#21153;&#26159;&#38750;&#24120;&#37325;&#35201;&#30340;,&#21363;&#20351;&#26159;&#22312;&#26500;&#24314;&#35270;&#22270;(&#35793;&#32773;&#27880;: &#36820;&#22238;&#32473;&#29992;&#25143;&#30340;HTML&#39029;&#38754;)&#30340;&#26102;&#20505;&#21457;&#29983;&#20102;&#20363;&#22806;,&#20063;&#24517;&#39035;&#30830;&#20445;&#36825;&#19968;&#28857;&#12290;&#32771;&#34385;&#21040;&#36825;&#19968;&#28857;&#65292;servlet&#36807;&#28388;&#22120;&#21487;&#20197;&#20445;&#35777;&#33021;&#22815;&#25805;&#20316;&#36825;&#20010;<tt class="literal">Session</tt>&#12290;&#25105;&#20204;&#25512;&#33616;&#20351;&#29992;&#19968;&#20010;<tt class="literal">ThreadLocal</tt>&#21464;&#37327;&#26469;&#20445;&#23384;&#24403;&#21069;&#30340;<tt class="literal">Session</tt>&#12290;&#65288;&#21442;&#38405;&#31532;&#19968;&#31456;&#65292;<a href="quickstart.html#quickstart-playingwithcats" title="1.4.&nbsp;&#19982;&#29483;&#21516;&#20048;">&#31532;&nbsp;1.4&nbsp;&#33410; &#8220;&#19982;&#29483;&#21516;&#20048;&#8221;</a>,&#26377;&#19968;&#20010;&#21442;&#32771;&#23454;&#29616;&#12290;&#65289;
                    </p></li><li><p>
                        &#22312;&#19968;&#20010;&#26377;&#21333;&#29420;&#30340;&#21830;&#19994;&#23618;&#30340;&#24212;&#29992;&#31243;&#24207;&#20013;, &#21830;&#19994;&#36923;&#36753;&#24517;&#39035;&#22312;&#36820;&#22238;&#20043;&#21069;&#8220;&#20934;&#22791;&#22909;&#8221;Web&#23618;&#25152;&#38656;&#35201;&#30340;&#25152;&#26377;&#38598;&#21512;&#12290;&#36825;&#23601;&#26159;&#35828;&#21830;&#19994;&#36923;&#36753;&#23618;&#24212;&#35813;&#35013;&#36733;&#22909;&#25152;&#26377;&#30340;&#25968;&#25454;&#65292;&#25226;&#19968;&#20010;&#29992;&#20363;&#25152;&#38656;&#35201;&#30340;&#25152;&#26377;&#25968;&#25454;&#37117;&#21021;&#22987;&#21270;&#22909;&#65292;&#20256;&#36882;&#32473;&#34920;&#29616;/web&#23618;&#12290;&#36890;&#24120;, &#24212;&#29992;&#31243;&#24207;&#20026;&#27599;&#20010;Web&#23618;&#38656;&#35201;&#30340;&#38598;&#21512;&#35843;&#29992;<tt class="literal">Hibernate.initialize()</tt>(&#24517;&#39035;&#22312;Session&#34987;&#20851;&#38381;&#20043;&#21069;&#35843;&#29992;)&#25110;&#32773;&#36890;&#36807;&#20351;&#29992;Hibernate &#26597;&#35810;&#65292;&#29992;<tt class="literal">FETCH</tt>&#23376;&#21477;&#26469;&#26126;&#30830;&#33719;&#21462;&#21040;&#25972;&#20010;&#38598;&#21512;&#12290;
                    </p></li><li><p>
                    You may also attach a previously loaded object to a new <tt class="literal">Session</tt>
                    with <tt class="literal">update()</tt> or <tt class="literal">lock()</tt> before
                    accessing unitialized collections (or other proxies). Hibernate can not
                    do this automatically, as it would introduce ad hoc transaction semantics!
                    &#20320;&#20063;&#21487;&#20197;&#25226;&#20808;&#21069;&#35013;&#36733;&#30340;&#23545;&#35937;&#38468;&#21152;&#21040;&#19968;&#20010;&#26032;&#30340;<tt class="literal">Session</tt>&#21435;&#65292;&#38656;&#35201;&#22312;&#35775;&#38382;&#26410;&#21021;&#22987;&#21270;&#30340;&#38598;&#21512;&#31867;&#65288;&#25110;&#20854;&#20182;&#20195;&#29702;&#65289;&#21069;&#20351;&#29992;<tt class="literal">update()</tt> &#25110; <tt class="literal">lock()</tt>&#12290;Hibernate&#19981;&#33021;&#33258;&#21160;&#20570;&#36825;&#20214;&#20107;&#65292;&#36825;&#22238;&#24102;&#26469;&#29305;&#21035;&#30340;&#20107;&#21153;&#35821;&#20041;&#65281;
                </p></li></ul></div><p>
                &#20320;&#21487;&#20197;&#20351;&#29992;Hibernate Session API&#20013;&#30340;<tt class="literal">filter()</tt> &#26041;&#27861;&#26469;&#22312;&#21021;&#22987;&#21270;&#20043;&#21069;&#24471;&#21040;&#38598;&#21512;&#30340;&#22823;&#23567;&#65306;
            </p><pre class="programlisting">( (Integer) s.filter( collection, "select count(*)" ).get(0) ).intValue()</pre><p>
                <tt class="literal">filter()</tt> &#25110;&#32773; <tt class="literal">createFilter()</tt>&#21516;&#26679;&#34987;&#29992;&#20110;&#26377;&#25928;&#30340;&#37325;&#26032;&#36733;&#20837;&#19968;&#20010;&#38598;&#21512;&#30340;&#23376;&#38598;&#32780;&#19981;&#38656;&#35201;&#36733;&#20837;&#25972;&#20010;&#38598;&#21512;&#12290;
            </p></div><div class="sect1" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="collections-sorted"></a>6.6.&nbsp;&#38598;&#21512;&#25490;&#24207;&#65288;Sorted Collections&#65289;</h2></div></div><div></div></div><p>
                Hibernate&#25903;&#25345;&#23454;&#29616;<tt class="literal">java.util.SortedMap</tt>&#21644;<tt class="literal">java.util.SortedSet</tt>&#30340;&#38598;&#21512;&#12290;
&#20320;&#24517;&#39035;&#22312;&#26144;&#23556;&#25991;&#20214;&#20013;&#25351;&#23450;&#19968;&#20010;&#27604;&#36739;&#22120;&#65306;
            </p><pre class="programlisting">&lt;set name="aliases" table="person_aliases" sort="natural"&gt;
    &lt;key column="person"/&gt;
    &lt;element column="name" type="string"/&gt;
&lt;/set&gt;

&lt;map name="holidays" sort="my.custom.HolidayComparator" lazy="true"&gt;
    &lt;key column="year_id"/&gt;
    &lt;index column="hol_name" type="string"/&gt;
    &lt;element column="hol_date" type="date"/&gt;
&lt;/map&gt;</pre><p>
                <tt class="literal">sort</tt>&#23646;&#24615;&#20013;&#20801;&#35768;&#30340;&#20540;&#21253;&#25324;<tt class="literal">unsorted</tt>,<tt class="literal">natural</tt>&#21644;&#26576;&#20010;&#23454;&#29616;&#20102;<tt class="literal">java.util.Comparator</tt>&#30340;&#31867;&#30340;&#21517;&#31216;&#12290;
            </p><p>
                &#20998;&#31867;&#38598;&#21512;&#30340;&#34892;&#20026;&#20107;&#23454;&#19978;&#35937;<tt class="literal">java.util.TreeSet</tt>&#25110;&#32773;<tt class="literal">java.util.TreeMap</tt>&#12290;
            </p><p>
                &#22914;&#26524;&#20320;&#24076;&#26395;&#25968;&#25454;&#24211;&#33258;&#24049;&#23545;&#38598;&#21512;&#20803;&#32032;&#25490;&#24207;&#65292;&#21487;&#20197;&#21033;&#29992;<tt class="literal">set</tt>,<tt class="literal">bag</tt>&#25110;&#32773;<tt class="literal">map</tt>&#26144;&#23556;&#20013;&#30340;<tt class="literal">order-by</tt>&#23646;&#24615;&#12290;&#36825;&#20010;&#35299;&#20915;&#26041;&#26696;&#21482;&#33021;&#22312;jdk1.4&#25110;&#32773;&#26356;&#39640;&#30340;jdk&#29256;&#26412;&#20013;&#25165;&#21487;&#20197;&#23454;&#29616;(&#36890;&#36807;LinkedHashSet&#25110;&#32773;
LinkedHashMap&#23454;&#29616;)&#12290; &#23427;&#26159;&#22312;SQL&#26597;&#35810;&#20013;&#23436;&#25104;&#25490;&#24207;&#65292;&#32780;&#19981;&#26159;&#22312;&#20869;&#23384;&#20013;&#12290;
            </p><pre class="programlisting">&lt;set name="aliases" table="person_aliases" order-by="name asc"&gt;
    &lt;key column="person"/&gt;
    &lt;element column="name" type="string"/&gt;
&lt;/set&gt;

&lt;map name="holidays" order-by="hol_date, hol_name" lazy="true"&gt;
    &lt;key column="year_id"/&gt;
    &lt;index column="hol_name" type="string"/&gt;
    &lt;element column="hol_date" type="date"/&gt;
&lt;/map&gt;</pre><p>
                &#27880;&#24847;: &#36825;&#20010;<tt class="literal">order-by</tt>&#23646;&#24615;&#30340;&#20540;&#26159;&#19968;&#20010;SQL&#25490;&#24207;&#23376;&#21477;&#32780;&#19981;&#26159;HQL&#30340;&#65281;
            </p><p>
                &#20851;&#32852;&#36824;&#21487;&#20197;&#22312;&#36816;&#34892;&#26102;&#20351;&#29992;<tt class="literal">filter()</tt>&#26681;&#25454;&#20219;&#24847;&#30340;&#26465;&#20214;&#26469;&#25490;&#24207;&#12290;
            </p><pre class="programlisting">sortedUsers = s.filter( group.getUsers(), "order by this.name" );</pre></div><div class="sect1" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="collections-idbag"></a>6.7.&nbsp;<tt class="literal">&#20351;&#29992;&lt;idbag&gt;</tt></h2></div></div><div></div></div><p>
                &#22914;&#26524;&#20320;&#23436;&#20840;&#20449;&#22857;&#25105;&#20204;&#23545;&#20110;&#8220;&#32852;&#21512;&#20027;&#38190;&#65288;composite keys&#65289;&#26159;&#20010;&#22351;&#19996;&#35199;&#8221;&#65292;&#21644;&#8220;&#23454;&#20307;&#24212;&#35813;&#20351;&#29992;&#65288;&#26080;&#26426;&#30340;&#65289;&#33258;&#24049;&#29983;&#25104;&#30340;&#20195;&#29992;&#26631;&#35782;&#31526;&#65288;surrogate keys&#65289;&#8221;&#30340;&#35266;&#28857;&#65292;&#20063;&#35768;&#20320;&#20250;&#24863;&#21040;&#26377;&#19968;&#20123;&#22855;&#24618;&#65292;&#25105;&#20204;&#30446;&#21069;&#20026;&#27490;&#23637;&#31034;&#30340;&#22810;&#23545;&#22810;&#20851;&#32852;&#21644;&#20540;&#38598;&#21512;&#37117;&#26159;&#26144;&#23556;&#25104;&#20026;&#24102;&#26377;&#32852;&#21512;&#20027;&#38190;&#30340;&#34920;&#30340;&#65281;&#29616;&#22312;&#65292;&#36825;&#19968;&#28857;&#38750;&#24120;&#20540;&#24471;&#20105;&#36777;&#65307;&#30475;&#19978;&#21435;&#19968;&#20010;&#21333;&#32431;&#30340;&#20851;&#32852;&#34920;&#24182;&#19981;&#33021;&#20174;&#20195;&#29992;&#26631;&#35782;&#31526;&#20013;&#33719;&#24471;&#20160;&#20040;&#22909;&#22788;&#65288;&#34429;&#28982;&#20351;&#29992;&#32452;&#21512;&#20540;&#30340;&#38598;&#21512;<span class="emphasis"><em>&#21487;&#33021;</em></span>&#20250;&#33719;&#24471;&#19968;&#28857;&#22909;&#22788;&#65289;&#12290;&#19981;&#36807;&#65292;Hibernate&#25552;&#20379;&#20102;&#19968;&#20010;&#65288;&#19968;&#28857;&#28857;&#35797;&#39564;&#24615;&#36136;&#30340;&#65289;&#21151;&#33021;&#65292;&#35753;&#20320;&#25226;&#22810;&#23545;&#22810;&#20851;&#32852;&#21644;&#20540;&#38598;&#21512;&#24212;&#24471;&#21040;&#19968;&#20010;&#20351;&#29992;&#20195;&#29992;&#26631;&#35782;&#31526;&#30340;&#34920;&#21435;&#12290;
            </p><p>
                <tt class="literal">&lt;idbag&gt;</tt> &#23646;&#24615;&#35753;&#20320;&#20351;&#29992;bag&#35821;&#20041;&#26469;&#26144;&#23556;&#19968;&#20010;<tt class="literal">List</tt> (&#25110;<tt class="literal">Collection</tt>)&#12290;
            </p><pre class="programlisting">&lt;idbag name="lovers" table="LOVERS" lazy="true"&gt;
    &lt;collection-id column="ID" type="long"&gt;
        &lt;generator class="hilo"/&gt;
    &lt;/collection-id&gt;
    &lt;key column="PERSON1"/&gt;
    &lt;many-to-many column="PERSON2" class="eg.Person" outer-join="true"/&gt;
&lt;/idbag&gt;</pre><p>
                &#20320;&#21487;&#20197;&#29702;&#35299;&#65292;<tt class="literal">&lt;idbag&gt;</tt>&#20154;&#24037;&#30340;id&#29983;&#25104;&#22120;&#65292;&#23601;&#22909;&#20687;&#26159;&#23454;&#20307;&#31867;&#19968;&#26679;&#65281;&#38598;&#21512;&#30340;&#27599;&#19968;&#34892;&#37117;&#26377;&#19968;&#20010;&#19981;&#21516;&#30340;&#20154;&#36896;&#20851;&#38190;&#23383;&#12290;&#20294;&#26159;&#65292;Hibernate&#27809;&#26377;&#25552;&#20379;&#20219;&#20309;&#26426;&#21046;&#26469;&#35753;&#20320;&#21462;&#24471;&#26576;&#20010;&#29305;&#23450;&#34892;&#30340;&#20154;&#36896;&#20851;&#38190;&#23383;&#12290;
            </p><p>
                &#27880;&#24847;<tt class="literal">&lt;idbag&gt;</tt>&#30340;&#26356;&#26032;&#24615;&#33021;&#35201;&#27604;&#26222;&#36890;&#30340;<tt class="literal">&lt;bag&gt;</tt>&#39640;&#24471;&#22810;&#65281;Hibernate&#21487;&#20197;&#26377;&#25928;&#30340;&#23450;&#20301;&#21040;&#19981;&#21516;&#30340;&#34892;&#65292;&#20998;&#21035;&#36827;&#34892;&#26356;&#26032;&#25110;&#21024;&#38500;&#24037;&#20316;&#65292;&#23601;&#22914;&#21516;&#22788;&#29702;&#19968;&#20010;list, map&#25110;&#32773;set&#19968;&#26679;&#12290;
                
            </p><p>
                &#22312;&#30446;&#21069;&#30340;&#23454;&#29616;&#20013;&#65292;&#36824;&#19981;&#25903;&#25345;&#20351;&#29992;<tt class="literal">identity</tt>&#26631;&#35782;&#31526;&#29983;&#25104;&#22120;&#31574;&#30053;&#26469;&#29983;&#25104;<tt class="literal">&lt;idbag&gt;</tt>&#38598;&#21512;&#30340;&#26631;&#35782;&#31526;&#12290;
            </p></div><div class="sect1" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="collections-bidirectional"></a>6.8.&nbsp;&#21452;&#21521;&#20851;&#32852;&#65288;Bidirectional Associations&#65289;</h2></div></div><div></div></div><p>
                <span class="emphasis"><em>&#21452;&#21521;&#20851;&#32852;</em></span>&#20801;&#35768;&#36890;&#36807;&#20851;&#32852;&#30340;&#20219;&#19968;&#31471;&#35775;&#38382;&#21478;&#22806;&#19968;&#31471;&#12290;&#22312;Hibernate&#20013;, &#25903;&#25345;&#20004;&#31181;&#31867;&#22411;&#30340;&#21452;&#21521;&#20851;&#32852;:

                </p><div class="variablelist"><dl><dt><span class="term">&#19968;&#23545;&#22810;&#65288;one-to-many&#65289;</span></dt><dd><p>
						    Set&#25110;&#32773;bag&#20540;&#22312;&#19968;&#31471;, &#21333;&#29420;&#20540;(&#38750;&#38598;&#21512;)&#22312;&#21478;&#22806;&#19968;&#31471;
                            </p></dd><dt><span class="term">&#22810;&#23545;&#22810;&#65288;many-to-many&#65289;</span></dt><dd><p>
				        &#20004;&#31471;&#37117;&#26159;set&#25110;bag&#20540;
                            </p></dd></dl></div><p>
            
            </p><p>
                &#35831;&#27880;&#24847;Hibernate&#19981;&#25903;&#25345;&#24102;&#26377;&#32034;&#24341;&#30340;&#38598;&#21512;(list,map&#25110;&#32773;array)&#20316;&#20026;"&#22810;"&#30340;&#37027;&#19968;&#31471;&#30340;&#21452;&#21521;one-to-many&#20851;&#32852;,&#20320;&#24517;&#39035;&#20351;&#29992;&#38598;&#21512;&#25110;&#32773;bag&#26144;&#23556;.
            </p><p>
                &#35201;&#24314;&#31435;&#19968;&#20010;&#21452;&#21521;&#30340;&#22810;&#23545;&#22810;&#20851;&#32852;&#65292;&#21482;&#38656;&#35201;&#26144;&#23556;&#20004;&#20010;many-to-many&#20851;&#32852;&#21040;&#21516;&#19968;&#20010;&#25968;&#25454;&#24211;&#34920;&#20013;&#65292;&#24182;&#20877;&#23450;&#20041;&#20854;&#20013;&#30340;&#19968;&#31471;&#20026;<span class="emphasis"><em>inverse</em></span>(&#20351;&#29992;&#21738;&#19968;&#31471;&#35201;&#26681;&#25454;&#20320;&#30340;&#36873;&#25321;)&#12290;&#36825;&#37324;&#26377;&#19968;&#20010;&#20174;&#19968;&#20010;&#31867;&#20851;&#32852;&#21040;<span class="emphasis"><em>&#20182;&#33258;&#36523;</em></span>&#30340;many-to-many&#30340;&#21452;&#21521;&#20851;&#32852;&#30340;&#20363;&#23376;(&#27599;&#19968;&#20010;category&#37117;&#21487;&#20197;&#26377;&#24456;&#22810;items,&#27599;&#19968;&#20010;items&#21487;&#20197;&#23646;&#20110;&#24456;&#22810;categories)&#65306;
            </p><pre class="programlisting">&lt;class name="org.hibernate.auction.Category"&gt;
    &lt;id name="id" column="ID"/&gt;
    ...
    &lt;bag name="items" table="CATEGORY_ITEM" lazy="true"&gt;
        &lt;key column="CATEGORY_ID"/&gt;
        &lt;many-to-many class="org.hibernate.auction.Item" column="ITEM_ID"/&gt;
    &lt;/bag&gt;
&lt;/class&gt;

&lt;class name="org.hibernate.auction.Item"&gt;
    &lt;id name="id" column="ID"/&gt;
    ...

    &lt;!-- inverse end --&gt;
    &lt;bag name="categories" table="CATEGORY_ITEM" inverse="true" lazy="true"&gt;
        &lt;key column="ITEM_ID"/&gt;
        &lt;many-to-many class="org.hibernate.auction.Category" column="CATEGORY_ID"/&gt;
    &lt;/bag&gt;
&lt;/class&gt;</pre><p>
                &#22914;&#26524;&#21482;&#23545;&#20851;&#32852;&#30340;&#21453;&#21521;&#31471;&#36827;&#34892;&#20102;&#25913;&#21464;&#65292;&#36825;&#20010;&#25913;&#21464;<span class="emphasis"><em>&#19981;&#20250;</em></span>&#34987;&#25345;&#20037;&#21270;&#12290;
            &#36825;&#34920;&#31034;Hibernate&#20026;&#27599;&#20010;&#21452;&#21521;&#20851;&#32852;&#22312;&#20869;&#23384;&#20013;&#23384;&#22312;&#20004;&#27425;&#34920;&#29616;,&#19968;&#20010;&#20174;A&#36830;&#25509;&#21040;B,&#21478;&#19968;&#20010;&#20174;B&#36830;&#25509;&#21040;A&#12290;&#22914;&#26524;&#20320;&#22238;&#24819;&#19968;&#19979;Java&#23545;&#35937;&#27169;&#22411;&#65292;&#25105;&#20204;&#26159;&#22914;&#20309;&#22312;Java&#20013;&#21019;&#24314;&#22810;&#23545;&#22810;&#20851;&#31995;&#30340;&#65292;&#36825;&#21487;&#20197;&#35753;&#20320;&#26356;&#23481;&#26131;&#29702;&#35299;&#65306;

            </p><pre class="programlisting">
category.getItems().add(item);          // The category now "knows" about the relationship
item.getCategories().add(category);     // The item now "knows" about the relationship

session.update(item);                     // No effect, nothing will be saved!
session.update(category);                 // The relationship will be saved</pre><p>
            &#38750;&#21453;&#21521;&#31471;&#29992;&#20110;&#25226;&#20869;&#23384;&#20013;&#30340;&#34920;&#31034;&#20445;&#23384;&#21040;&#25968;&#25454;&#24211;&#20013;&#12290;&#22914;&#26524;&#20004;&#31471;&#37117;&#36827;&#34892;&#20102;&#25913;&#32534;&#65292;&#25105;&#20204;&#20250;&#36827;&#34892;&#22810;&#20313;&#30340;INSERT/UPDATE,&#29978;&#33267;&#21487;&#33021;&#24471;&#21040;&#22806;&#38190;&#20914;&#31361;&#65281;&#36825;&#19968;&#28857;&#23545;&#21452;&#21521;&#30340;&#19968;&#23545;&#22810;&#20851;&#32852;&#20063;&#26159;&#19968;&#26679;&#30340;&#12290;
        </p><p>
                &#35201;&#24314;&#31435;&#19968;&#20010;&#19968;&#23545;&#22810;&#30340;&#21452;&#21521;&#20851;&#32852;&#65292;&#20320;&#21487;&#20197;&#36890;&#36807;&#25226;&#19968;&#20010;&#19968;&#23545;&#22810;&#20851;&#32852;&#65292;&#20316;&#20026;&#19968;&#20010;&#22810;&#23545;&#19968;&#20851;&#32852;&#26144;&#23556;&#21040;&#21040;&#21516;&#19968;&#24352;&#34920;&#30340;&#23383;&#27573;&#19978;&#65292;&#24182;&#19988;&#22312;"&#22810;"&#30340;&#37027;&#19968;&#31471;&#23450;&#20041;<tt class="literal">inverse="true"</tt>&#12290;
               &#65288;&#21407;&#25991;&#65306; You may map a bidirectional one-to-many association by mapping a one-to-many association 
                to the same table column(s) as a many-to-one association and declaring the many-valued 
                end <tt class="literal">inverse="true"</tt>.&#65289;
            </p><pre class="programlisting">&lt;class name="eg.Parent"&gt;
    &lt;id name="id" column="id"/&gt;
    ....
    &lt;set name="children" inverse="true" lazy="true"&gt;
        &lt;key column="parent_id"/&gt;
        &lt;one-to-many class="eg.Child"/&gt;
    &lt;/set&gt;
&lt;/class&gt;

&lt;class name="eg.Child"&gt;
    &lt;id name="id" column="id"/&gt;
    ....
    &lt;many-to-one name="parent" class="eg.Parent" column="parent_id"/&gt;
&lt;/class&gt;</pre><p>
                &#22312;&#8220;&#19968;&#8221;&#36825;&#19968;&#31471;&#23450;&#20041;<tt class="literal">inverse="true"</tt>&#19981;&#20250;&#24433;&#21709;&#32423;&#32852;&#25805;&#20316;&#65292;&#20108;&#32773;&#26159;&#19981;&#21516;&#30340;&#27010;&#24565;&#65281;
            </p></div><div class="sect1" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="collections-ternary"></a>6.9.&nbsp;&#19977;&#37325;&#20851;&#32852;&#65288;Ternary Associations&#65289;</h2></div></div><div></div></div><p>
            	&#36825;&#37324;&#26377;&#20004;&#31181;&#21487;&#33021;&#30340;&#36884;&#24452;&#26469;&#26144;&#23556;&#19968;&#20010;&#19977;&#37325;&#20851;&#32852;&#12290;&#20854;&#20013;&#19968;&#20010;&#26159;&#20351;&#29992;&#32452;&#21512;&#20803;&#32032;(&#19979;&#38754;&#23558;&#35752;&#35770;).&#21478;&#22806;&#19968;&#20010;&#26159;&#20351;&#29992;&#19968;&#20010;map&#65292;&#24182;&#19988;&#24102;&#26377;&#20851;&#32852;&#20316;&#20026;&#20854;&#32034;&#24341;&#65306;
            </p><pre class="programlisting">&lt;map name="contracts" lazy="true"&gt;
    &lt;key column="employer_id"/&gt;
    &lt;index-many-to-many column="employee_id" class="Employee"/&gt;
    &lt;one-to-many column="contract_id" class="Contract"/&gt;
&lt;/map&gt;</pre><pre class="programlisting">&lt;map name="connections" lazy="true"&gt;
    &lt;key column="node1_id"/&gt;
    &lt;index-many-to-many column="node2_id" class="Node"/&gt;
    &lt;many-to-many column="connection_id" class="Connection"/&gt;
&lt;/map&gt;</pre></div><div class="sect1" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="collections-heterogeneous"></a>6.10.&nbsp;&#24322;&#31867;&#20851;&#32852;(Heterogeneous Associations)</h2></div></div><div></div></div><p>
	        <tt class="literal">&lt;many-to-any&gt;</tt>&#21644;<tt class="literal">&lt;index-many-to-any&gt;</tt>&#20803;&#32032;&#25552;&#20379;&#30495;&#27491;&#30340;&#24322;&#31867;&#20851;&#32852;&#12290;&#36825;&#20123;&#20803;&#32032;&#21644;<tt class="literal">&lt;any&gt;</tt>&#20803;&#32032;&#24037;&#20316;&#26041;&#24335;&#26159;&#21516;&#26679;&#30340;,&#20182;&#20204;&#37117;&#24212;&#35813;&#24456;&#23569;&#29992;&#21040;&#12290;
	    </p></div><div class="sect1" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="collections-example"></a>6.11.&nbsp;&#38598;&#21512;&#20363;&#23376;&#65288;Collection example&#65289;</h2></div></div><div></div></div><p>
                &#22312;&#21069;&#38754;&#30340;&#20960;&#20010;&#31456;&#33410;&#30340;&#30830;&#38750;&#24120;&#20196;&#20154;&#36855;&#24785;&#12290; &#22240;&#27492;&#35753;&#25105;&#20204;&#26469;&#30475;&#19968;&#20010;&#20363;&#23376;&#12290;&#36825;&#20010;&#31867;&#65306;
            </p><pre class="programlisting">package eg;
import java.util.Set;

public class Parent {
    private long id;
    private Set children;

    public long getId() { return id; }
    private void setId(long id) { this.id=id; }

    private Set getChildren() { return children; }
    private void setChildren(Set children) { this.children=children; }

    ....
    ....
}</pre><p>
                &#36825;&#20010;&#31867;&#26377;&#19968;&#20010;<tt class="literal">eg.Child</tt>&#30340;&#23454;&#20363;&#38598;&#21512;&#12290;&#22914;&#26524;&#27599;&#19968;&#20010;&#23376;&#23454;&#20363;&#33267;&#22810;&#26377;&#19968;&#20010;&#29238;&#23454;&#20363;, &#37027;&#20040;&#26368;&#33258;&#28982;&#30340;&#26144;&#23556;&#26159;&#19968;&#20010;one-to-many&#30340;&#20851;&#32852;&#20851;&#31995;&#65306;
            </p><pre class="programlisting">&lt;hibernate-mapping&gt;

    &lt;class name="eg.Parent"&gt;
        &lt;id name="id"&gt;
            &lt;generator class="sequence"/&gt;
        &lt;/id&gt;
        &lt;set name="children" lazy="true"&gt;
            &lt;key column="parent_id"/&gt;
            &lt;one-to-many class="eg.Child"/&gt;
        &lt;/set&gt;
    &lt;/class&gt;

    &lt;class name="eg.Child"&gt;
        &lt;id name="id"&gt;
            &lt;generator class="sequence"/&gt;
        &lt;/id&gt;
        &lt;property name="name"/&gt;
    &lt;/class&gt;

&lt;/hibernate-mapping&gt;</pre><p>
                &#22312;&#20197;&#19979;&#30340;&#34920;&#23450;&#20041;&#20013;&#21453;&#24212;&#20102;&#36825;&#20010;&#26144;&#23556;&#20851;&#31995;&#65306;
            </p><pre class="programlisting">create table parent ( id bigint not null primary key )
create table child ( id bigint not null primary key, name varchar(255), parent_id bigint )
alter table child add constraint childfk0 (parent_id) references parent</pre><p>
                &#22914;&#26524;&#29238;&#20146;&#26159;<span class="emphasis"><em>&#24517;&#39035;</em></span>&#30340;, &#37027;&#20040;&#23601;&#21487;&#20197;&#20351;&#29992;&#21452;&#21521;one-to-many&#30340;&#20851;&#32852;&#20102;&#65306;
            </p><pre class="programlisting">&lt;hibernate-mapping&gt;

    &lt;class name="eg.Parent"&gt;
        &lt;id name="id"&gt;
            &lt;generator class="sequence"/&gt;
        &lt;/id&gt;
        &lt;set name="children" inverse="true" lazy="true"&gt;
            &lt;key column="parent_id"/&gt;
            &lt;one-to-many class="eg.Child"/&gt;
        &lt;/set&gt;
    &lt;/class&gt;

    &lt;class name="eg.Child"&gt;
        &lt;id name="id"&gt;
            &lt;generator class="sequence"/&gt;
        &lt;/id&gt;
        &lt;property name="name"/&gt;
        &lt;many-to-one name="parent" class="eg.Parent" column="parent_id" not-null="true"/&gt;
    &lt;/class&gt;

&lt;/hibernate-mapping&gt;</pre><p>
                &#35831;&#27880;&#24847;<tt class="literal">NOT NULL</tt>&#30340;&#32422;&#26463;:                
            </p><pre class="programlisting">create table parent ( id bigint not null primary key )
create table child ( id bigint not null
                     primary key,
                     name varchar(255),
                     parent_id bigint not null )
alter table child add constraint childfk0 (parent_id) references parent</pre><p>
                &#21478;&#22806;&#19968;&#26041;&#38754;,&#22914;&#26524;&#19968;&#20010;&#23376;&#23454;&#20363;&#21487;&#33021;&#26377;&#22810;&#20010;&#29238;&#23454;&#20363;, &#37027;&#20040;&#23601;&#24212;&#35813;&#20351;&#29992;many-to-many&#20851;&#32852;&#65306;
            </p><pre class="programlisting">&lt;hibernate-mapping&gt;

    &lt;class name="eg.Parent"&gt;
        &lt;id name="id"&gt;
            &lt;generator class="sequence"/&gt;
        &lt;/id&gt;
        &lt;set name="children" lazy="true" table="childset"&gt;
            &lt;key column="parent_id"/&gt;
            &lt;many-to-many class="eg.Child" column="child_id"/&gt;
        &lt;/set&gt;
    &lt;/class&gt;

    &lt;class name="eg.Child"&gt;
        &lt;id name="id"&gt;
            &lt;generator class="sequence"/&gt;
        &lt;/id&gt;
        &lt;property name="name"/&gt;
    &lt;/class&gt;

&lt;/hibernate-mapping&gt;</pre><p>
                &#34920;&#23450;&#20041;&#65306;
            </p><pre class="programlisting">create table parent ( id bigint not null primary key )
create table child ( id bigint not null primary key, name varchar(255) )
create table childset ( parent_id bigint not null,
                        child_id bigint not null,
                        primary key ( parent_id, child_id ) )
alter table childset add constraint childsetfk0 (parent_id) references parent
alter table childset add constraint childsetfk1 (child_id) references child</pre></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="mapping.html">&#19978;&#19968;&#39029;</a>&nbsp;</td><td width="20%" align="center"><a accesskey="u" href="index.html">&#19978;&#19968;&#32423;</a></td><td width="40%" align="right">&nbsp;<a accesskey="n" href="components.html">&#19979;&#19968;&#39029;</a></td></tr><tr><td width="40%" align="left" valign="top">&#31532;&nbsp;5&nbsp;&#31456;&nbsp;O/R Mapping&#22522;&#30784;&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="index.html">&#36215;&#22987;&#39029;</a></td><td width="40%" align="right" valign="top">&nbsp;&#31532;&nbsp;7&nbsp;&#31456;&nbsp;&#32452;&#20214;&#65288;Component&#65289;&#26144;&#23556;</td></tr></table></div></body></html>